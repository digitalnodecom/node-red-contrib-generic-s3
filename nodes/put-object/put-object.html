
<!-- BEGIN PUT OBJECT -->
<script type="text/x-red" data-template-name="Put Object">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><code><i class="fa fa-cogs"></i></code> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><code><i class="fa fa-database"></i></code> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-key"><code><i class="fa fa-magic"></i></code> <span data-i18n="Key">&nbsp;</span>Key: </label>
        <input type="text" id="node-input-key" data-i18n="[placeholder]Object Key">
    </div>
    <div class="form-row">
        <label for="node-input-contentType"><code><i class="fa fa-code"></i></code> <span data-i18n="Content-Type">&nbsp;</span>Content-Type: </label>
        <input type="text" id="node-input-contentType" data-i18n="[placeholder]Content-Type">
    </div>
    <div class="form-row">
        <label for="node-input-body"><code><i class="fa fa-pencil-square-o"></i></code> <span data-i18n="Body">&nbsp;</span>Body: </label>
        <input type="text" id="node-input-body" data-i18n="[placeholder]{String}">
    </div>
    <div class="form-row">
        <label for="node-input-metadata"><i class="fa fa-info-circle"></i> <span data-i18n="Metadata">&nbsp;</span>Metadata: </label>
        <input type="text" id="node-input-metadata" data-i18n="[placeholder]{JSON}">
    </div>
    <div class="form-row">
        <label for="node-input-stream"><i class="fa fa-barcode"></i> <span data-i18n="Upsert">&nbsp;</span>Stream: </label>
        <input type="checkbox" style="margin: 5px 0px; width: 15px;" id="node-input-stream">
    </div>
    <div class="form-row">
        <label for="node-input-upsert"><i class="fa fa-superpowers"></i> <span data-i18n="Upsert">&nbsp;</span>Upsert: </label>
        <input type="checkbox" style="margin: 5px 0px; width: 15px;" id="node-input-upsert">
    </div>
    <div class="form-row">
        <label for="node-input-contentencoding"><i class="fa fa-file-code-o"></i> <span data-i18n="Content Encoding">&nbsp;</span>Content Encoding: </label>
        <input type="text" id="node-input-contentencoding" data-i18n="[placeholder]gzip">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> | <code>Key</code> | <code>Content-Type</code> | <code>Body</code> | <code>Stream</code> | <code>Metadata</code> | <code>Content Encoding</code> field(s) blank if you are setting it via msg property. <code><b><u>Red</u></b></code> iconed properites are <code>required!</code> E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li>
                    <li><code>msg.key = "unique-object-key.json"</code></li>
                    <li><code>msg.contentType = "application/json"</code></li>
                    <li><code>msg.body = "some data"</code></li>
                    <li><code>msg.stream = false</code></li>
                    <li><code>msg.metadata = { version: '123' }</code></li>
                    <li><code>msg.upsert = true</code></li>
                    <li><code>msg.contentencoding = "gzip"</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Put Object">
    <p>S3 put object node. This node is used to create or update object
    and(or) object's metadata with a specific key within a specified bucket.
    <code>Bucket</code> - The bucket |
    <code>Key</code> - The object key |
    <code>Content-Type</code> - Content-Type of the object's data |
    <code>Body</code> - Actual contents of the object |
    <code>Stream</code> - (Optional) The provided body is a stream |
    <code>Metadata</code> - (Optional) Metadata of the object<br>
    <code>Upsert</code> - (Optional) Specifies wether the objects should be upserted or not |
    <code>Content Encoding</code> - (Optional) Specifies the content encoding</p>
    These values can be specified in the node properites or by setting input properties like the following
    <code>msg.bucket</code> - The bucket |
    <code>msg.key</code> - The object key |
    <code>msg.contentType</code> - Content-Type of the object's data |
    <code>msg.body</code> - Actual contents of the object |
    <code>msg.stream</code> - (Optional) The provided body is a stream |
    <code>msg.metadata</code> - (Optional) Metadata of the object |
    <code>msg.upsert</code> - (Optional) Specifies wether the objects should be upserted or not |
    <code>msg.contentencoding</code> - (Optional) Specifies the content encoding. <br>
    For streamifying the contents of the body we recommend using <a href="https://github.com/digitalnodecom/node-red-contrib-generic-s3/blob/main/common/common.js#L23-L30">this function</a>
    </p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Put Object',{
        category: 'storage-input',
        color:"#FFFFFF",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            bucket: {type: 'text', required: false},
            key: {type: 'text', required: false},
            contentType: {type: 'text', required: false},
            body: {type: 'text', required: false},
            stream: {required: false},
            metadata: {required: false},
            upsert: {required: false},
            contentencoding: {type: 'text', required: false},
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        label: function() {
            return this.name ? this.name : "Put Object";
        }
    });
</script>
<!-- END PUT OBJECT -->