<!-- BEGIN CONFIG-S3 -->
<script type="text/x-red" data-template-name="client-s3">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i><span data-i18n="name">&nbsp;</span>Name:</label>
        <input class="input-append-left" type="text" id="node-config-input-name" style="width: 70%;" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-config-input-endpoint"><i class="fa fa-code"></i><span data-i18n="endpoint">&nbsp;</span>S3 endpoint:</label>
        <input class="input-append-left" type="text" id="node-config-input-endpoint" style="width: 70%;" >
    </div>
    <div class="form-row">
        <label for="node-config-input-region"><i class="fa fa-globe"></i><span data-i18n="region">&nbsp;</span>S3 region:</label>
        <input class="input-append-left" type="text" id="node-config-input-region" style="width: 70%;" >
    </div>
    <div class="form-row">
        <label for="node-config-input-accesskeyid"><i class="fa fa-lock"></i><span data-i18n="accesskeyid">&nbsp;</span>Access Key: </label>
        <input class="input-append-left" type="text" id="node-config-input-accesskeyid" style="width: 70%;" >
    </div>
    <div class="form-row">
        <label for="node-config-input-secretaccesskey"><i class="fa fa-key"></i><span data-i18n="secretaccesskey">&nbsp;</span>Key secret: </label>
        <input class="input-append-left" type="password" id="node-config-input-secretaccesskey" style="width: 70%;" >
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">The <b>endpoint</b> should be an url beggining with <code>http://</code> or <code>https://</code> </span></li>
            <li>
                <span data-i18n="[html]tip2"><code>*</code> It is recommended to use environment variables for the <code>Access Key</code> and <code>Key secret</code> fields! Environment variables can be used by inputting the name of the variable in the designated field. The name of the variable is enclosed by parentheses and prefixed by <code>$</code> sign. E.g. <code>$(nameOfTheVar)</code>
            </li>
        </ul>
    </div>
</script>

<script type="text/javascript">
    (function() {
        RED.nodes.registerType('client-s3',{
            category: 'config',
            defaults: {
                name: {type: 'text', value: ""},
                endpoint: {type: 'text', required: true, validate: RED.validators.regex(/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/) },
                region: {type: 'text', required: true},
            },
            credentials: {
                accesskeyid: {type:"text",required:true},
                secretaccesskey: {type: "password",required:true},
            },
            label: function() {
                return this.name ? this.name : this.endpoint;
            },
            exportable: false,
        });
    })();
</script>
<!-- END CONFIG-S3 -->

<!-- BEGIN LIST BUCKETS -->
<script type="text/x-red" data-template-name="List Buckets">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
</script>

<script type="text/x-red" data-help-name="List Buckets">
    <p>S3 list buckets node. This node is used for listing all buckets
    that are available with the configured client</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('List Buckets',{
        category: 'storage-input',
        color:"#ffffff",
        defaults: {
            conf: {type:"client-s3", required:true},
            name: {value: ""}
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "List Buckets";
        }
    });
</script>
<!-- END LIST BUCKETS -->

<!-- BEGIN LIST OBJECTS -->
<script type="text/x-red" data-template-name="List Objects">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-maxkeys"><i class="fa fa-list-ol"></i> <span data-i18n="Max keys">&nbsp;</span>Max keys: </label>
        <input type="number" id="node-input-maxkeys" data-i18n="[placeholder]1000">
    </div>
    <div class="form-row">
        <label for="node-input-marker"><i class="fa fa-map-pin"></i> <span data-i18n="Marker">&nbsp;</span>Marker: </label>
        <input type="text" id="node-input-marker" data-i18n="[placeholder]example-file.json">
    </div>
    <div class="form-row">
        <label for="node-input-prefix"><i class="fa fa-indent"></i> <span data-i18n="Prefix">&nbsp;</span>Prefix: </label>
        <input type="text" id="node-input-prefix" data-i18n="[placeholder]exmp">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> field blank if you are setting it via msg property. E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li>
                    <li><code>msg.maxkeys = 1000</code></li>
                    <li><code>msg.marker = "example.json"</code></li>
                    <li><code>msg.prefix = "exmp"</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="List Objects">
    <p>S3 list objects node. This node is used to list all objects that
    are within a bucket. The bucket can be specified either directly
    on this node properties or by setting input property <code>msg.bucket</code></p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('List Objects',{
        category: 'storage-input',
        color:"#FFFFFF",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            bucket: {type: 'text', required: false},
            maxkeys: {type: 'num', required: false},
            marker: {type: 'text', required: false},
            prefix: {type: 'text', required: false}
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "List Objects";
        }
    });
</script>
<!-- END LIST OBJECTS -->

<!-- BEGIN GET OBJECT -->
<script type="text/x-red" data-template-name="Get Object">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-magic"></i> <span data-i18n="Key">&nbsp;</span>Key: </label>
        <input type="text" id="node-input-key" data-i18n="[placeholder]Object Key">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> and(or) <code>Key</code> field(s) blank if you are setting it via msg property. E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li> 
                    <li><code>msg.key = "unique-object-key"</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Get Object">
    <p>S3 get object node. This node is used to get object contents and
    metadata from the specified bucket using the configured client. The bucket
    name and the object key can be specified in the properties of the node or 
    by setting input properties <code>msg.bucket</code> 
    and(or) <code>msg.key</code> respectively</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Get Object',{
        category: 'storage-input',
        color:"#FFFFFF",
        // color:"#a8d5ff",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            bucket: {type: 'text', required: false},
            key: {type: 'text', required: false}
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "Get Object";
        }
    });
</script>
<!-- END GET OBJECT -->

<!-- BEGIN PUT OBJECT -->
<script type="text/x-red" data-template-name="Put Object">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-magic"></i> <span data-i18n="Key">&nbsp;</span>Key: </label>
        <input type="text" id="node-input-key" data-i18n="[placeholder]Object Key">
    </div>
    <div class="form-row">
        <label for="node-input-contentType"><i class="fa fa-code"></i> <span data-i18n="Content-Type">&nbsp;</span>Content-Type: </label>
        <input type="text" id="node-input-contentType" data-i18n="[placeholder]Content-Type">
    </div>
    <div class="form-row">
        <label for="node-input-body"><i class="fa fa-pencil-square-o"></i> <span data-i18n="Body">&nbsp;</span>Body: </label>
        <input type="text" id="node-input-body" data-i18n="[placeholder]{String}">
    </div>
    <div class="form-row">
        <label for="node-input-metaData"><i class="fa fa-info-circle"></i> <span data-i18n="Metadata">&nbsp;</span>Metadata: </label>
        <input type="text" id="node-input-metaData" data-i18n="[placeholder]{JSON}">
    </div>
    <div class="form-row">
        <label for="node-input-upsert"><i class="fa fa-superpowers"></i> <span data-i18n="Upsert">&nbsp;</span>Upsert: </label>
        <input type="checkbox" style="margin: 5px 0px; width: 15px;" id="node-input-upsert">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> | <code>Key</code> | <code>Content-Type</code> | <code>Body</code> | <code>Metadata</code> field(s) blank if you are setting it via msg property. E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li> 
                    <li><code>msg.key = "unique-object-key.json"</code></li>
                    <li><code>msg.contentType = "application/json"</code></li>
                    <li><code>msg.body = "some data"</code></li>
                    <li><code>msg.metaData = { version: '123' }</code></li>
                    <li><code>msg.upsert = true</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Put Object">
    <p>S3 put object node. This node is used to create or update object
    and(or) object's metadata with a specific key within a specified bucket.
    <code>Bucket</code> - The bucket |
    <code>Key</code> - The object key | 
    <code>Content-Type</code> - Content-Type of the object's data | 
    <code>Body</code> - Actual contents of the object | 
    <code>Metadata</code> - (Optional) Metadata of the object<br>
    These values can be specified in the node properites or by setting input properties like the following
    <code>msg.bucket</code> - The bucket |
    <code>msg.key</code> - The object key | 
    <code>msg.contentType</code> - Content-Type of the object's data | 
    <code>msg.body</code> - Actual contents of the object | 
    <code>msg.metadata</code> - (Optional) Metadata of the object |
    <code>msg.upsert</code> - (Optional) Specifies wether the objects should be upserted or not</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Put Object',{
        category: 'storage-input',
        color:"#FFFFFF",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            bucket: {type: 'text', required: false},
            key: {type: 'text', required: false},
            contentType: {type: 'text', required: false},
            body: {type: 'text', required: false},
            metadata: {required: false},
            upsert: {required: false}
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "Put Object";
        }
    });
</script>
<!-- END PUT OBJECT -->

<!-- BEGIN PUT OBJECTS -->
<script type="text/x-red" data-template-name="Put Objects">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-objects"><i class="fa fa-pencil-square-o"></i> <span data-i18n="Objects">&nbsp;</span>Objects: </label>
        <input type="text" id="node-input-objects" data-i18n="[placeholder][{JSON}, {JSON}, ...]">
    </div>
    <div class="form-row">
        <label for="node-input-upsert"><i class="fa fa-superpowers"></i> <span data-i18n="Upsert">&nbsp;</span>Upsert: </label>
        <input type="checkbox" style="margin: 5px 0px; width: 15px;" id="node-input-upsert">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">If you are setting Objects using this node, make sure it is in valid, format as specified in the placeholder. The objects field needs to be an array of objects. Leave <code>Objects</code> field blank if you are setting it via msg property. E.g.:
                <ul>
                    <li><code>msg.objects = [{</br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key: "unique-object-key.json", </br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bucket: "test-bucket", </br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; body: "some data", </br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contentType: "application/json", </br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; metadata(optional): { version: '123' } </br> &nbsp;&nbsp;&nbsp;}]</code></li> 
                    <li><code>msg.upsert = true</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Put Objects">
    <p>S3 put object node. This node is used to create or update objects
    and(or) objects' metadata with a specific key within a specified bucket.
    <code>Objects</code> - The objects |
    <code>Upsert</code> - (Optional) Specifies wether the objects should be upserted or not<br>
    These values can be specified in the node properites or by setting input properties like the following
    <code>msg.objects</code> - The objects |
    <code>msg.metadata</code> - (Optional) Specifies wether the objects should be upserted or not</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Put Objects',{
        category: 'storage-input',
        color:"#FFFFFF",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            objects: {type: 'text', required: false},
            upsert: {required: false}
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "Put Objects";
        }
    });
</script>
<!-- END PUT OBJECTS -->

<!-- BEGIN DELETE OBJECT -->
<script type="text/x-red" data-template-name="Delete Object">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-magic"></i> <span data-i18n="Key">&nbsp;</span>Key: </label>
        <input type="text" id="node-input-key" data-i18n="[placeholder]Object Key">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> and(or) <code>Key</code> field(s) blank if you are setting it via msg property. E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li> 
                    <li><code>msg.key = "unique-object-key"</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Delete Object">
    <p>S3 delete object node. This node is used to delete object
    from a specified bucket. Object's key and the bucket can be 
    specified in the node properites or by setting input properties
    in <code>msg.bucket</code> and(or) <code>msg.key</code></p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Delete Object',{
        category: 'storage-input',
        color:"#FFFFFF",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            bucket: {type: 'text', required: false},
            key: {type: 'text', required: false}
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "Delete Object";
        }
    });
</script>
<!-- END DELETE OBJECT -->

<!-- BEGIN CREATE BUCKET -->
<script type="text/x-red" data-template-name="Create Bucket">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><i class="fa fa-cogs"></i> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> field blank if you are setting it via msg property. E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li> 
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Create Bucket">
    <p>S3 create bucket node. This node is used to create bucket with perviously defined
    S3 client used in the configuration. The bucket name can be specified 
    either directly on the node properties or by setting input property
    <code>msg.bucket</code></p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Create Bucket',{
        category: 'storage-input',
        color:"#FFFFFF",
        defaults: {
            name: {value: ""},
            conf: {type:"client-s3", required:true},
            bucket: {type: 'text', required: false},
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        // icon: "font-awesome/fa-automobile",
        label: function() {
            return this.name ? this.name : "Create Bucket";
        }
    });
</script>
<!-- END CREATE BUCKET -->