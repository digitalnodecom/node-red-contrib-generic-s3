<!-- BEGIN MOVE OBJECT -->
<script type="text/x-red" data-template-name="Move Object">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="Name">&nbsp;</span>Name: </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]Name">
    </div>
    <div class="form-row">
        <label for="node-input-conf"><code><i class="fa fa-cogs"></i></code> <span data-i18n="Configuration">&nbsp;</span>Client: </label>
        <input type="text" id="node-input-conf">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><code><i class="fa fa-database"></i></code> <span data-i18n="Bucket">&nbsp;</span>Bucket: </label>
        <input type="text" id="node-input-bucket" data-i18n="[placeholder]Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-key"><code><i class="fa fa-magic"></i></code> <span data-i18n="Key">&nbsp;</span>Key: </label>
        <input type="text" id="node-input-key" data-i18n="[placeholder]Object Key">
    </div>
     <div class="form-row">
        <label for="node-input-sourcebucket"><code><i class="fa fa-database"></i></code> <span data-i18n="Source Bucket">&nbsp;</span>Source Bucket: </label>
        <input type="text" id="node-input-sourcebucket" data-i18n="[placeholder]Source Bucket">
    </div>
    <div class="form-row">
        <label for="node-input-sourcekey"><code><i class="fa fa-magic"></i></code> <span data-i18n="Source Object">&nbsp;</span>Source Object: </label>
        <input type="text" id="node-input-sourcekey" data-i18n="[placeholder]Source Object">
    </div>
    <div class="form-row">
        <label for="node-input-contentencoding"><i class="fa fa-file-code-o"></i> <span data-i18n="Destination Content Encoding">&nbsp;</span>Destination Content Encoding: </label>
        <input type="text" id="node-input-contentencoding" data-i18n="[placeholder]gzip">
    </div>
    <div class="form-row">
        <label for="node-input-acl"><i class="fa fa-lock"></i> <span data-i18n="acl">&nbsp;</span>ACL: </label>
        <select id="node-input-acl">
            <option value="" selected>Choose ACL permissions</option>
            <option value="private">Private</option>
            <option value="public-read">Public Read</option>
            <option value="public-read-write">Public Read Write</option>
            <option value="authenticated-read">Authenticated Read</option>
            <option value="aws-exec-read">AWS Exec Read</option>
            <option value="bucket-owner-read">Bucker Owner Read</option>
            <option value="bucket-owner-full-control">Bucket Owner Full Control</option>
        </select>
    </div>
    <div class="form-tips">
        <span>Tips:</span>
        <ul>
            <li><span data-i18n="[html]tip1">Leave <code>Bucket</code> | <code>Key</code> | <code>Source Bucket</code> | <code>Source Object</code> | <code>Destination Content Encoding</code> field(s) blank if you are setting it via msg property. <code><b><u>Red</u></b></code> iconed properites are <code>required!</code> E.g.:
                <ul>
                    <li><code>msg.bucket = "test-bucket"</code></li>
                    <li><code>msg.key = "object-key.json"</code></li>
                    <li><code>msg.sourcebucket = "new-bucket"</code></li>
                    <li><code>msg.sourcekey = "new-object-key.json"</code></li>
                    <li><code>msg.contentencoding = "gzip"</code></li>
                    <li><code>msg.acl = "public-read"</code></li>
                </ul>
            </li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="Move Object">
    <p>S3 move object node. This node is used to move object
    to another bucket with a new key.
    <code>Destination Bucket</code> - The new bucket |
    <code>Destination Key</code> - The new object key |
    <code>Source Object</code> - The source object key |
    <code>Source Bucket</code> - The source object bucket |
    <code>Destination Content Encoding</code> - Content encoding of the destination object |
    <code>ACL</code> - (Optional) Specifies which users have access to the object, and the type of access they have.

    These values can be specified in the node properites or by setting input properties like the following
    <code>msg.bucket</code> - The new bucket |
    <code>msg.key</code> - The new object key |
    <code>msg.sourcebucket</code> - The old bucket |
    <code>msg.sourcekey</code> - The old object key |
    <code>msg.contentencoding = "gzip"</code> - Content encoding of the destination object |
    <code>msg.acl</code> - (Optional) Specifies the object ACL permissions. |
    </p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('Move Object', {
        category: 'storage-input',
        color: "#FFFFFF",
        defaults: {
            name: { value: "" },
            conf: { type: "client-s3", required: true },
            bucket: { type: 'text', required: false },
            key: { type: 'text', required: false },
            sourcebucket: { type: 'text', required: false },
            sourcekey: { type: 'text', required: false },
            contentencoding: { type: 'text', required: false },
            acl: { type: 'text', required: false },
        },
        inputs: 1,
        outputs: 1,
        icon: "s3Logo.png",
        label: function () {
            return this.name ? this.name : "Move Object";
        }
    });
</script>
<!-- END MOVE OBJECT -->